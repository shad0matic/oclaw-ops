# =============================================================================
# OpenClaw Ops - Environment Validation Schema
# =============================================================================
# JSON Schema for validating environment configuration files
# Usage: Validate with yq or similar tools
# =============================================================================

{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "OpenClaw Ops Environment",
  "type": "object",
  "required": ["DATABASE_URL", "NEXTAUTH_SECRET"],
  "properties": {
    "DATABASE_URL": {
      "type": "string",
      "pattern": "^postgresql://",
      "description": "PostgreSQL connection string"
    },
    "NEXTAUTH_URL": {
      "type": "string",
      "format": "uri",
      "description": "Base URL for NextAuth"
    },
    "NEXTAUTH_SECRET": {
      "type": "string",
      "minLength": 32,
      "description": "Secret for NextAuth (min 32 chars)"
    },
    "DEBUG": {
      "type": "boolean",
      "default": false
    },
    "NODE_ENV": {
      "type": "string",
      "enum": ["development", "production", "test"],
      "default": "production"
    },
    "GEMINI_API_KEY": {
      "type": "string",
      "description": "Google Gemini API key"
    },
    "TWILIO_ACCOUNT_SID": {
      "type": "string",
      "description": "Twilio Account SID"
    },
    "TWILIO_AUTH_TOKEN": {
      "type": "string",
      "description": "Twilio Auth Token"
    },
    "BACKUP_DIR": {
      "type": "string",
      "default": "./backups",
      "description": "Directory for database backups"
    },
    "RETENTION_DAYS": {
      "type": "integer",
      "minimum": 1,
      "maximum": 365,
      "default": 7,
      "description": to retain "Days backups"
    }
  }
}
